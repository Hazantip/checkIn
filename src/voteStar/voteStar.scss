$red                    : #D0021B;
$blue                   : #02A3D0;
$sliderHeight           : 80; // px
$sliderPadding          : 10;  // px
$handleSize             : $sliderHeight - ($sliderPadding * 2); // px
$sliderRadius           : 50px;
$sine                   : cubic-bezier(0.39, 0.58, 0.57, 1);

// --------------------------
@mixin shimmer($background-color:#000, $shimmer-color:#fff, $duration: 2000ms, $delay: 0ms) {
	background: linear-gradient(to right, $background-color 41%, darken($shimmer-color, 10%) 49%, $shimmer-color, darken($shimmer-color, 10%) 52%, $background-color 60%);
	background-size: 200% 100%;
	background-repeat: no-repeat;
	background-position: 100% 0;
	-webkit-background-clip: text;
	-webkit-text-fill-color: rgba(0, 0, 0, 0.0);
	animation: shimmer $duration linear $delay infinite normal;
}
@keyframes shimmer {
	80% { background-position-x: 100%; }
	100% { background-position-x: 0; }
}
// --------------------------

/**
	zIndex:
	- image 0
	- state 100
	- checkIn 20
		• text 0
		• handle 10
	- voteSlider 30
*/

.starVote {
	position: relative;
	pointer-events: none;
	&-main {
		position: relative;
		max-height: 90vh;
		overflow: hidden;
		background-color: #ddd;
	}
	&-image {
		position: relative;
		z-index: 0;
		padding-bottom: 100%;
		background-repeat: no-repeat;
		background-position: 50% 0%;
		background-size: cover;
		max-height: 90vh;
		&::before,
		&::after {
			transition: 1000ms cubic-bezier(0.4, 0, 1, 1);
		}
		&::after {
			content: '';
			position: absolute;
			top: 25%;
			left: 0;
			right: 0;
			bottom: 0;
			background-image: linear-gradient(to bottom , rgba(0, 0, 0, 0), rgba(0, 0, 0, 1));
			opacity: 0.29;
		}
		&::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background-color: #000;
			opacity: 0.38;
		}
	}
	&-state {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		z-index: 100;
		background-color: rgba(0, 0, 0, 0.15);
		padding: 4px 15px;
		text-align: center;
		color: white;
	}
}

.checkIn {
	&-slider {
		position: absolute;
		z-index: 20;
		bottom: 34px;
		right: 6%;
		left: 6%;
		height: $sliderHeight + px;
		background: rgba(0, 0, 0, 0.54);
		transition: opacity 1000ms ease, background-color 1000ms ease;
		padding: $sliderPadding + px;
		&,
		&__inner {
			border-radius: $sliderRadius;
			//overflow: hidden;
		}
		&__inner {
			position: relative;
			width: 100%;
			height: 100%;
		}
		&__text {
			position: absolute;
			left: 0;
			right: 0;
			bottom: 0;
			z-index: 0;
			top: 0;
			color: white;
			padding: 0 30px;
			line-height: $handleSize + px;
		}
		&__handle {
			display: block;
			position: absolute;
			z-index: 10;
			top: 50%;
			left: 0;
			margin-top: -($handleSize / 2) + px;
			width: $handleSize + px;
			height: $handleSize + px;
			background-color: rgba(88, 88, 88, 0.85);
			border-radius: 50%;
			cursor: pointer;
			transition: background-color 300ms ease;
		}
	}

	// - check in pass out animations
	&Out-leave {
		opacity: 1;
	}
	&Out-leave-active {
		transition: all 1000ms ease;
	}
	&Out-leave-to {
		opacity: 1
	}
	// - leave animation
	&.checkInOut-leave-active {
		.checkIn-slider {
			transition: 400ms ease 0ms;
			transform-origin: 50% 50%;
			//transform: translateX(-10px);
			opacity: 0;
			overflow: hidden;
		}
		.checkIn-slider__inner {
			//transform: translateX(75px);
			transition: 200ms ease-out;
		}
	}
}

.voteSlider {
	position: absolute;
	bottom: 34px;
	left: 0;
	right: 0;
	z-index: 30;
	&-inner {
		position: relative;
		height: $sliderHeight + px;
	}
	$handleWidth: 200;
	$visibleHandlePart: 0.6;
	&-handle__wrap {
		position: absolute;
		height: $sliderHeight + px;
		width: $handleWidth + px;
		&.accept {
			left: 0;
			margin-left: -($handleWidth * $visibleHandlePart) + px;
			text-align: right;
		}
		&.cancel {
			right: 0;
			margin-right: -($handleWidth * $visibleHandlePart) + px;
			text-align: left;
		}
	}
	&-handle {
		position: absolute;
		top: 0;
		height: 100%;
		width: 100%;
		background: rgba(0, 0, 0, 0.54);
		border-radius: $sliderRadius;
	}
	// - enter animations
	&.showVoteSlider-enter {
		.voteSlider-handle__wrap {
			&:first-child {
				transform: translateX(-100px);
			}
			&:last-child {
				transform: translateX(100px);
			}
		}
	}
	&.showVoteSlider-enter-active {
		.voteSlider-handle__wrap {
			// TODO: probably should be better to wrap it with this own transition component
			transition: 1000ms ease-out;
			transform: translateX(0);
		}
	}
}

/*  ----------------------------------------------
	NOTE: - Global activity states
	---------------------------------------------- */
.enable-play {
	pointer-events: auto;
	.checkIn-slider__handle {
		background-color: $blue;
		&.animate {
			animation: 8000ms wobble ease infinite;
			animation-delay: -6000ms;
		}
	}
	.checkIn-slider__text {
		@include shimmer($background-color: white, $shimmer-color: rgba(0, 0, 0, 0.01), $duration: 8000ms, $delay: -6000ms);
	}
}

/*  ----------------------------------------------
	NOTE: - Keyframes
	---------------------------------------------- */
@keyframes scaleBounce {
	50% {
		transform: scale(1.35);
	}
}
@keyframes rubberBand {
	from {
		transform: scale3d(1, 1, 1);
	}
	
	30% {
		transform: scale3d(1.25, 0.75, 1);
	}
	
	40% {
		transform: scale3d(0.75, 1.25, 1);
	}
	
	50% {
		transform: scale3d(1.15, 0.85, 1);
	}
	
	65% {
		transform: scale3d(.95, 1.05, 1);
	}
	
	75% {
		transform: scale3d(1.05, .95, 1);
	}
	
	to {
		transform: scale3d(1, 1, 1);
	}
}
@keyframes wobble {
	from {
		transform: none;
	}
	
	2% {
		transform: translate3d(-25%, 0, 0) rotate3d(0, 0, 1, -5deg);
	}
	
	4% {
		transform: translate3d(20%, 0, 0) rotate3d(0, 0, 1, 3deg);
	}
	
	6% {
		transform: translate3d(-15%, 0, 0) rotate3d(0, 0, 1, -3deg);
	}
	
	8% {
		transform: translate3d(10%, 0, 0) rotate3d(0, 0, 1, 2deg);
	}
	
	10% {
		transform: translate3d(-5%, 0, 0) rotate3d(0, 0, 1, -1deg);
	}
	
	to {
		transform: none;
	}
}
@keyframes jello {
	from, 11.1%, to {
		transform: none;
	}
	
	22.2% {
		transform: skewX(-12.5deg) skewY(-12.5deg);
	}
	
	33.3% {
		transform: skewX(6.25deg) skewY(6.25deg);
	}
	
	44.4% {
		transform: skewX(-3.125deg) skewY(-3.125deg);
	}
	
	55.5% {
		transform: skewX(1.5625deg) skewY(1.5625deg);
	}
	
	66.6% {
		transform: skewX(-0.78125deg) skewY(-0.78125deg);
	}
	
	77.7% {
		transform: skewX(0.390625deg) skewY(0.390625deg);
	}
	
	88.8% {
		transform: skewX(-0.1953125deg) skewY(-0.1953125deg);
	}
}

/*  ----------------------------------------------
	NOTE: - Common transitions for transition component:
	---------------------------------------------- */
// - Fade
.fade-enter-active, .fade-leave-active {
	opacity: 1;
	transition: 400ms cubic-bezier(0.24, 0.71, 0.57, 0.96);
}
.fade-enter, .fade-leave-to {
	opacity: 0;
}

// - Fade-in-out
.fadeInOut-enter-active {
	transition: 300ms ease-out 0ms;
}
.fadeInOut-leave-active {
	transition: 400ms ease-out 0ms;
}
.fadeInOut-enter-active, .fadeInOut-leave-active {
	opacity: 1;
	transform: translateY(0);
}
.fadeInOut-enter, .fadeInOut-leave-to {
	opacity: 0;
	transform: translateY(-100%);
}